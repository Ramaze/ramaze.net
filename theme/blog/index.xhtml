<?r
entries = get_entries(
  'blog',
  :order      => :desc,
  :categories => true,
  :user       => true
)
?>
<!DOCTYPE html>
<html lang="#{get_setting(:language).value}">
    <head>
        #{partial(:head)}
    </head>
    <body>
        <div class="container">
            <div id="container" class="row">
                <div id="top" class="grid_12">
                    #{partial(:header)}
                </div>

                <div id="content" class="grid_12">
                    <?r if entries.empty? ?>

                    <p>No blog articles have been added yet.</p>

                    <?r end ?>

                    <?r entries.each do |entry| ?>
                    <article>
                        <header>
                            <h1>
                                <a href="/blog/entry/#{entry.slug}">
                                    #{entry.title}
                                </a>
                            </h1>
                            <p class="meta">
                                Written by #{entry.user.name} on
                                <time pubdate="pubdate"
                                datetime="#{entry.created_at.strftime('%Y-%m-%d')}">
                                    #{entry.created_at.strftime('%A, %B %d, %Y')}
                                </time>
                            </p>
                        </header>

                        #{entry.fields[:body]}

                        <footer>
                            <p>
                                Posted in: #{entry.categories.map { |c|
                                  c.name
                                }.join(', ') }
                            </p>
                        </footer>
                    </article>
                    <?r end ?>
                </div>
            </div>

            #{partial(:footer)}
        </div>
    </body>
</html>
