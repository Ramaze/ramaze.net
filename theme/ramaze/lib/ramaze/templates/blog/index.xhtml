<?r entries = plugin(:section_entries, :section => 'blog') ?>
<!DOCTYPE html>
<html lang="#{Zen::Settings[:language]}">
    <head>
        #{partial(:head)}
    </head>
    <body>
        <!-- Global container for all elements -->
        <div class="container">
            <div id="container" class="row">
                <!-- Top part of the website containing the title and navigation menu -->
                <div id="top" class="grid_12">
                    #{partial(:header)}
                </div>

                <!-- Area containing all blog posts -->
                <div id="content" class="grid_12">
                    <section>
                        <?r if entries.empty? ?>
                        <p>No blog articles have been added yet.</p>
                        <?r end ?>
                        <?r entries.each do |entry| ?>
                        <article>
                            <header>
                                <h1>
                                    <a href="/blog/entry/#{entry[:slug]}">
                                        #{entry[:title]}
                                    </a>
                                </h1>
                                <p class="meta">
                                    Written by #{entry[:user][:name]} on
                                    <time pubdate="pubdate" 
                                    datetime="#{entry[:created_at].strftime('%Y-%m-%d')}">
                                        #{entry[:created_at].strftime('%A, %B %d, %Y')}
                                    </time>
                                </p>
                            </header>

                            #{entry[:fields][:body]}

                            <footer>
                                <p>
                                    Posted in: 
                                    #{entry[:categories].map { |c| c[:name] }.join(', ') }
                                    |
                                    <a href="/blog/entry/#{entry[:slug]}#comments">
                                        <?r if entry[:comments].count === 1 ?>
                                        1 comment
                                        <?r else ?>
                                        #{entry[:comments].count} comments
                                        <?r end ?>
                                    </a>
                                </p>
                            </footer>
                        </article>
                        <?r end ?>
                    </section>
                </div>
            </div>

            #{partial(:footer)}
        </div>
    </body>
</html>
